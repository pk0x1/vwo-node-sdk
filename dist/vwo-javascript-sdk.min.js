/*!
 * vwo-javascript-sdk - v1.10.0
 * URL - https://github.com/wingify/vwo-node-sdk
 * 
 * Copyright 2019-2020 Wingify Software Pvt. Ltd.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 * Dependencies used - 
 *  1. murmurhash - ^0.0.2
 *  2. superstruct - ^0.8.3
 *  3. uuid - ^3.3.2
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vwoSdk=t():e.vwoSdk=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){var r=n(24);e.exports=r},function(e,t){e.exports={INDEX:"".concat("lib","/index"),VWO:"".concat("lib","/VWO"),API:"".concat("lib","/api/index"),Activate:"".concat("lib","/api/activate"),GetVariation:"".concat("lib","/api/getVariation"),Track:"".concat("lib","/api/track"),IsFeatureEnabled:"".concat("lib","/api/isFeatureEnabled"),GetFeatureVariableValue:"".concat("lib","/api/getFeatureVariableValue"),Push:"".concat("lib","/api/push"),SegmentEvaluator:"".concat("lib/core","/SegmentEvaluator"),BucketingService:"".concat("lib/core","/BucketingService"),VariationDecider:"".concat("lib/core","/VariationDecider"),ConsoleLogManager:"".concat("lib/services","/ConsoleLogManager"),EventQueue:"".concat("lib/services","/EventQueue"),LoggingManager:"".concat("lib/services","/LoggingManager"),SettingsFileManager:"".concat("lib/services","/SettingsFileManager"),BatchEventsQueue:"".concat("lib/services","/BatchEventsQueue"),CampaignUtil:"".concat("lib/util","/CampaignUtil"),DataTypeUtil:"".concat("lib/util","/DataTypeUtil"),EventDispatcher:"".concat("lib/util","/EventDispatcher"),EventDispatcherUtil:"".concat("lib/util","/EventDispatcherUtil"),FeatureUtil:"".concat("lib/util","/FeatureUtil"),Functionutil:"".concat("lib/util","/Functionutil"),ImpressionUtil:"".concat("lib/util","/ImpressionUtil"),UuidUtil:"".concat("lib/util","/UuidUtil"),ValidateUtil:"".concat("lib/util","/ValidateUtil"),DecisionUtil:"".concat("lib/util","/DecisionUtils"),HttpHandlerUtil:"".concat("lib/util","/HttpHandlerUtil")}},function(e,t){var n={_toStringValue:function(e){return Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===n._toStringValue(e)},isString:function(e){return"[object String]"===n._toStringValue(e)},isObject:function(e){return"[object Object]"===n._toStringValue(e)},isFunction:function(e){return"[object Function]"===n._toStringValue(e)},isBoolean:function(e){return"[object Boolean]"===n._toStringValue(e)},isUndefined:function(e){return"[object Undefined]"===n._toStringValue(e)},isNull:function(e){return"[object Null]"===n._toStringValue(e)},isArray:function(e){return"[object Array]"===n._toStringValue(e)}};e.exports=n},function(e,t,n){var r={};r={name:"vwo-javascript-sdk",version:"1.10.0"},e.exports={SDK_NAME:r.name,SDK_VERSION:r.version,PLATFORM:"server",SEED_VALUE:1,MAX_TRAFFIC_PERCENT:100,MAX_TRAFFIC_VALUE:1e4,MAX_EVENTS_PER_REQUEST:5e3,DEFAULT_EVENTS_PER_REQUEST:100,DEFAULT_REQUEST_TIME_INTERVAL:600,STATUS_RUNNING:"RUNNING",SEED_URL:"https://vwo.com",HTTP_PROTOCOL:"http://",HTTPS_PROTOCOL:"https://"}},function(e,t,n){var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(2),o=n(22),u=n(6),l=n(9),s=(a(r={},u.ACTIVATE,(function(e){var t=e.campaignKey,n=e.userId,r=e.customVariables,a=void 0===r?{}:r,i=e.variationTargetingVariables,u=void 0===i?{}:i,l=e.userStorageData,s=void 0===l?{}:l;return[{key:"campaignKey",value:t,type:o.STRING},{key:"userId",value:n,type:o.STRING},{key:"customVariables",value:a,type:o.OBJECT},{key:"variationTargetingVariables",value:u,type:o.OBJECT},{key:"userStorageData",value:s,type:o.OBJECT}]})),a(r,u.TRACK,(function(e){var t=e.campaignKey,n=e.userId,r=e.goalIdentifier,a=e.customVariables,i=void 0===a?{}:a,u=e.variationTargetingVariables,s=void 0===u?{}:u,c=e.userStorageData,g=void 0===c?{}:c,f=e.goalTypeToTrack,E=void 0===f?l.ALL:f,d=e.shouldTrackReturningUser,p=void 0!==d&&d;return[{key:"campaignKey",value:t,type:o.STRING_NULL_UNDEFINED_ARRAY},{key:"userId",value:n,type:o.STRING},{key:"goalIdentifier",value:r,type:o.STRING},{key:"customVariables",value:i,type:o.OBJECT},{key:"variationTargetingVariables",value:s,type:o.OBJECT},{key:"userStorageData",value:g,type:o.OBJECT},{key:"goalTypeToTrack",value:E,type:o.STRING},{key:"shouldTrackReturningUser",value:p,type:o.BOOLEAN}]})),a(r,u.IS_FEATURE_ENABLED,(function(e){var t=e.campaignKey,n=e.userId,r=e.customVariables,a=void 0===r?{}:r,i=e.variationTargetingVariables,u=void 0===i?{}:i,l=e.userStorageData,s=void 0===l?{}:l;return[{key:"campaignKey",value:t,type:o.STRING},{key:"userId",value:n,type:o.STRING},{key:"customVariables",value:a,type:o.OBJECT},{key:"variationTargetingVariables",value:u,type:o.OBJECT},{key:"userStorageData",value:s,type:o.OBJECT}]})),a(r,u.GET_FEATURE_VARIABLE_VALUE,(function(e){var t=e.campaignKey,n=e.variableKey,r=e.userId,a=e.customVariables,i=void 0===a?{}:a,u=e.variationTargetingVariables,l=void 0===u?{}:u,s=e.userStorageData,c=void 0===s?{}:s;return[{key:"campaignKey",value:t,type:o.STRING},{key:"variableKey",value:n,type:o.STRING},{key:"userId",value:r,type:o.STRING},{key:"customVariables",value:i,type:o.OBJECT},{key:"variationTargetingVariables",value:l,type:o.OBJECT},{key:"userStorageData",value:c,type:o.OBJECT}]})),a(r,u.PUSH,(function(e){var t=e.tagKey,n=e.tagValue,r=e.userId;return[{key:"tagKey",value:t,type:o.STRING},{key:"tagValue",value:n,type:o.STRING},{key:"userId",value:r,type:o.STRING}]})),r);s[u.GET_VARIATION_NAME]=s[u.ACTIVATE];var c={isValidValue:function(e){return!(void 0===e||!e)},isValidString:function(e){return c.isValidValue(e)&&i.isString(e)},isValidNumber:function(e){return c.isValidValue(e)&&i.isNumber(e)},isValidFunction:function(e){return c.isValidValue(e)&&i.isFunction(e)},isValidBoolean:function(e){return void 0!==e&&i.isBoolean(e)},isValidObject:function(e){return void 0!==e&&i.isObject(e)},areValidParamsForAPIMethod:function(e){for(var t=s[e.method](e),n=[],r=0;r<t.length;r++){var a=t[r],u=a.value;switch(a.type){case o.NUMBER:n.push(c.isValidNumber(u));break;case o.STRING:n.push(c.isValidString(u));break;case o.BOOLEAN:n.push(c.isValidBoolean(u));break;case o.OBJECT:n.push(c.isValidObject(u));break;case o.STRING_NULL_UNDEFINED_ARRAY:var l=c.isValidString(u)||i.isUndefined(u)||i.isNull(u)||i.isArray(u);n.push(l)}}return n.every((function(e){return e}))}};e.exports=c},function(e,t,n){var r=n(4),a=n(3),i=n(0),o=n(1),u=n(9),l=n(29),s=i.LogLevelEnum,c=i.LogMessageEnum,g=i.LogMessageUtil,f=i.getLogger(),E={_getVariationBucketRange:function(e){if(!e||0===e)return 0;var t=Math.ceil(100*e);return Math.min(t,a.MAX_TRAFFIC_VALUE)},getCampaignBasedOnId:function(e,t){for(var n,r=0;r<e.campaigns.length;r++)if(parseInt(e.campaigns[r].id,10)===parseInt(t,10)){n=e.campaigns[r];break}return n},scaleVariationWeights:function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);if(t)e.forEach((function(e){return e.weight=e.weight/t*100}));else{var n=100/e.length;e.forEach((function(e){return e.weight=n}))}},getCampaign:function(e,t){for(var n,r=0;r<e.campaigns.length;r++)if(e.campaigns[r].key===t){n=e.campaigns[r];break}return n},getCampaignsForKeys:function(e,t){var n=[];return t.forEach((function(t){var r=E.getCampaign(e,t);r?n.push(r):n.push({key:t})})),n},getCampaignsForGoal:function(e,t,n){var r=[];return e.campaigns.forEach((function(a){var i=E.getCampaignGoal(e,a.key,t);!i||n!==u.ALL&&i.type!==n||r.push(a)})),r.length||f.log(s.ERROR,g.build(c.ERROR_MESSAGES.NO_CAMPAIGN_FOUND,{file:o.CampaignUtil,goalIdentifier:t})),r},getCampaignStatus:function(e,t){var n=E.getCampaign(e,t);return n&&n.status?n.status.toLowerCase():""},isCampaignRunning:function(e,t){return"running"===E.getCampaignStatus(e,t)},validateCampaign:function(e){return r.isValidValue(e)&&e.variations&&Object.keys(e.variations).length>0},setVariationAllocation:function(e){for(var t=e.variations.length,n=0,r=0;n<t;n++){var a=e.variations[n];r+=E.assignRangeValues(a,r),f.log(s.INFO,g.build(c.INFO_MESSAGES.VARIATION_RANGE_ALLOCATION,{file:o.CampaignUtil,campaignKey:e.key,variationName:a.name,variationWeight:a.weight,start:a.startVariationAllocation,end:a.endVariationAllocation}))}},assignRangeValues:function(e,t){var n;return(n=E._getVariationBucketRange(e.weight))?(e.startVariationAllocation=t+1,e.endVariationAllocation=t+n):(e.startVariationAllocation=-1,e.endVariationAllocation=-1),n},getCampaignGoal:function(e,t,n){var r=null;if(!e||!t||!n)return r;var a=E.getCampaign(e,t);if(!a)return r;for(var i=0;i<a.goals.length;i++){var o=a.goals[i];if(o.identifier===n){r=o;break}}return r},getCampaignVariation:function(e,t,n){var r=null;if(!e||!t||!n)return r;var a=E.getCampaign(e,t);if(!a)return r;for(var i=0;i<a.variations.length;i++){var o=a.variations[i];if(o.name===n){r=o;break}}return r},getControlForCampaign:function(e){var t={};if(!e||!e.variations)return t;for(var n=0;n<e.variations.length;n++)if(1===e.variations[n].id){t=e.variations[n];break}return t},isFeatureTestCampaign:function(e){return!(!e||e.type!==l.FEATURE_TEST)},isFeatureRolloutCampaign:function(e){return!(!e||e.type!==l.FEATURE_ROLLOUT)},isAbCampaign:function(e){return!(!e||e.type!==l.AB)}};e.exports=E},function(e,t){e.exports={LAUNCH:"launch",ACTIVATE:"activate",GET_VARIATION_NAME:"getVariation",TRACK:"track",IS_FEATURE_ENABLED:"isFeatureEnabled",GET_FEATURE_VARIABLE_VALUE:"getFeatureVariableValue",PUSH:"push"}},function(e,t,n){var r=n(0),a=n(1),i=r.getLogger(),o=r.LogLevelEnum,u=r.LogMessageEnum,l=r.LogMessageUtil,s=a.FunctionUtil,c={cloneObject:function(e){return e?JSON.parse(JSON.stringify(e)):e},getRandomNumber:function(){return Math.random()},getCurrentUnixTimestamp:function(){return Math.ceil(+new Date/1e3)},matchWithRegex:function(e,t){try{return e.match(new RegExp(t))}catch(e){return i.log(o.ERROR,l.build(u.ERROR_MESSAGES.REGEX_CREATION_FAILED,{file:s})),null}}};e.exports=c},function(e,t,n){var r=n(21),a=n(12),i=n(5),o=n(2),u=n(7),l=n(0),s=n(1),c=n(30),g=l.LogLevelEnum,f=l.LogMessageEnum,E=l.LogMessageUtil,d=l.getLogger(),p=n(31),v=s.DecisionUtil,S="whitelisting",_="pre-segmentation",R={getVariation:function(e,t,n,a,i,u){var l,s,A,I,b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},O=arguments.length>8?arguments[8]:void 0;if(n.isForcedVariationEnabled){var m,T=R._evaluateWhitelisting(n,a,i,b);if(T?(l=c.PASSED,m="for ".concat(T.variationName)):(l=c.FAILED,m=""),d.log(g.INFO,E.build(f.INFO_MESSAGES.SEGMENTATION_STATUS,{campaignKey:a,userId:i,customVariables:JSON.stringify(b),file:v,status:l,segmentationType:S,variation:m})),T)return A=T.variationName,T}else d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.WHITELISTING_SKIPPED,{campaignKey:a,userId:i,file:v}));var h=R._getStoredVariationAndGoalIdentifiers(e,t,n.key,i,y)||{},N=h.storedVariation,U=h.goalIdentifier;if(N)return d.log(g.INFO,E.build(f.INFO_MESSAGES.GOT_STORED_VARIATION,{file:v,campaignKey:a,userId:i,variationName:N.name})),{variation:N,variationName:N.name,variationId:N.id,storedGoalIdentifier:U};if(o.isObject(n.segments)&&!Object.keys(n.segments).length)d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:a,userId:i,file:v}));else{var L=p(n.segments,u,a,i);if(l=L?c.PASSED:c.FAILED,d.log(g.INFO,E.build(f.INFO_MESSAGES.SEGMENTATION_STATUS,{campaignKey:a,userId:i,customVariables:JSON.stringify(u||{}),file:v,status:l,segmentationType:_,variation:""})),l===c.FAILED)return{}}var V=r.getVariationAllotted(i,n);return s=V.variation,A=V.variationName,I=V.variationId,A?(R._saveUserData(e,n,A,i,O),d.log(g.INFO,E.build(f.INFO_MESSAGES.VARIATION_ALLOCATED,{file:v,campaignKey:a,userId:i,variationName:A}))):d.log(g.INFO,E.build(f.INFO_MESSAGES.NO_VARIATION_ALLOCATED,{file:v,campaignKey:a,userId:i})),{variation:s&&s.variation,variationName:A,variationId:I}},_evaluateWhitelisting:function(e,t,n,r){var l,s;r=Object.assign({},r,{_vwoUserId:n});var _=[];if(e.variations.forEach((function(e){!o.isObject(e.segments)||Object.keys(e.segments).length?(o.isObject(e.segments)&&p(e.segments,r,t,n,e.name)?(s=c.PASSED,_.push(u.cloneObject(e))):s=c.FAILED,d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_STATUS,{campaignKey:t,userId:n,customVariables:JSON.stringify(r),file:v,status:s,segmentationType:S,variation:"for ".concat(e.name)}))):d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:t,userId:n,file:v,variation:", for ".concat(e.name)}))})),_.length>1){i.scaleVariationWeights(_);for(var R=0,A=0;R<_.length;R++)A+=i.assignRangeValues(_[R],A);l=a._getVariation(_,a.calculateBucketValue(n))}else l=_[0];if(l)return{variation:l,variationName:l.name,variationId:l.id}},_getStoredVariationAndGoalIdentifiers:function(e,t,n,r,a){var o=R._getStoredUserData(e,r,n,a),u=o.variationName,l=o.goalIdentifier;return o&&o.campaignKey&&u?(d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.GETTING_STORED_VARIATION,{file:v,campaignKey:n,userId:r,variationName:u})),{storedVariation:i.getCampaignVariation(t,n,u),goalIdentifier:l}):(d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_STORED_VARIATION,{file:v,campaignKey:n,userId:r})),null)},_getStoredVariation:function(e,t,n,r,a){var i=R._getStoredVariationAndGoalIdentifiers(e,t,n,r,a);return i&&i.storedVariation?i.storedVariation:null},_getStoredUserData:function(e,t,n,r){var a={userId:t,variationName:null,campaignKey:n,goalIdentifier:null};if(!e.userStorageService)return d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_USER_STORAGE_SERVICE_GET,{file:v})),a;try{var i=e.userStorageService.get(t,n)||{};return d.log(g.INFO,E.build(f.INFO_MESSAGES.GETTING_DATA_USER_STORAGE_SERVICE,{file:v,userId:t})),Object.assign({},i,r)}catch(e){d.log(g.ERROR,E.build(f.ERROR_MESSAGES.GET_USER_STORAGE_SERVICE_FAILED,{file:v,userId:t}))}},_saveUserData:function(e,t,n,r,a){var i=!1;if(!e.userStorageService)return d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_USER_STORAGE_SERVICE_SET,{file:v})),i;try{var u={userId:r,variationName:n,campaignKey:t.key};o.isUndefined(a)||(u.goalIdentifier=a),e.userStorageService.set(u),d.log(g.INFO,E.build(f.INFO_MESSAGES.SETTING_DATA_USER_STORAGE_SERVICE,{file:v,userId:r})),i=!0}catch(e){d.log(g.ERROR,E.build(f.ERROR_MESSAGES.SET_USER_STORAGE_SERVICE_FAILED,{file:v,userId:r})),i=!1}return i}};e.exports=R},function(e,t){e.exports={REVENUE:"REVENUE_TRACKING",CUSTOM:"CUSTOM_GOAL",ALL:"ALL"}},function(e,t){var n={areObjectKeys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length},getKeyValue:function(e){if(n.areObjectKeys(e)){var t=Object.keys(e)[0];return{key:t,value:e[t]}}},objectValues:function(e){return Object.keys(e).map((function(t){return e[t]}))}};e.exports=n},function(e,t,n){var r=n(3),a=n(15),i=n(9),o=n(37),u=n(4),l=n(7),s=n(0),c=n(1),g=s.LogLevelEnum,f=s.LogMessageEnum,E=s.LogMessageUtil,d=s.getLogger();function p(e,t){var n=e.accountId;return{account_id:n,uId:encodeURIComponent(t),random:l.getRandomNumber(),sId:l.getCurrentUnixTimestamp(),u:o.generateFor(t,n),sdk:r.SDK_NAME,"sdk-v":r.SDK_VERSION,ap:r.PLATFORM}}e.exports={buildEventForPushing:function(e,t,n,i){var o,u,l,s=Object.assign({},p(e,i));return s.url=r.HTTPS_PROTOCOL+a.BASE_URL+a.PUSH,s.tags=JSON.stringify({u:(o={},u=encodeURIComponent(t),l=encodeURIComponent(n),u in o?Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[u]=l,o)}),d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.IMPRESSION_FOR_PUSH,{file:c.ImpressionUtil,properties:JSON.stringify(s)})),s},buildBatchEventForPushing:function(e,t,n,r){},buildEventForTrackingUser:function(e,t,n,i){var o=Object.assign({experiment_id:t,combination:n},p(e,i));return o.ed=JSON.stringify({p:"server"}),o.url=r.HTTPS_PROTOCOL+a.BASE_URL+a.TRACK_USER,d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_USER,{file:c.ImpressionUtil,properties:JSON.stringify(o)})),o},buildBatchEventForTrackingUser:function(e,t,n,r){},buildEventForTrackingGoal:function(e,t,n,o){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,v=l.id,S=Object.assign({experiment_id:t,combination:n},p(e,o));return S.url=r.HTTPS_PROTOCOL+a.BASE_URL+a.TRACK_GOAL,S.goal_id=v,l.type===i.REVENUE&&u.isValidValue(s)&&(S.r=s),d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_GOAL,{file:c.ImpressionUtil,properties:JSON.stringify(S)})),S},buildBatchEventForTrackingGoal:function(e,t,n,r){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}},function(e,t,n){var r=n(23),a=n(3),i=n(4),o=n(0),u=n(1),l=o.LogLevelEnum,s=o.LogMessageEnum,c=o.LogMessageUtil,g=o.getLogger(),f={_generateBucketValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e/Math.pow(2,32),a=(t*r+1)*n,i=Math.floor(a);return i},_getVariation:function(e,t){for(var n=0;n<Object.keys(e).length;n++){var r=e[n];if(t>=r.startVariationAllocation&&t<=r.endVariationAllocation)return r}return null},_getBucketValueForUser:function(e){var t=r.v3(e,a.SEED_VALUE),n=f._generateBucketValue(t,a.MAX_TRAFFIC_PERCENT);return g.log(l.DEBUG,c.build(s.DEBUG_MESSAGES.USER_HASH_BUCKET_VALUE,{file:u.BucketingService,hashValue:t,bucketValue:n,userId:e})),n},isUserPartOfCampaign:function(e,t){if(!i.isValidValue(e)||!t)return!1;var n=t.percentTraffic,r=f._getBucketValueForUser(e),a=0!==r&&r<=n;return g.log(l.INFO,c.build(s.INFO_MESSAGES.USER_ELIGIBILITY_FOR_CAMPAIGN,{file:u.BucketingService,userId:e,isUserPart:a})),a},bucketUserToVariation:function(e,t){var n;if(!i.isValidValue(e))return g.log(l.ERROR,c.build(s.ERROR_MESSAGES.INVALID_USER_ID,{file:u.BucketingService,userId:e,method:"bucketUserToVariation"})),null;if(!t)return null;t.percentTraffic&&(n=a.MAX_TRAFFIC_VALUE/t.percentTraffic/100);var r=f._generateHashValue(e),o=f._generateBucketValue(r,a.MAX_TRAFFIC_VALUE,n);return g.log(l.DEBUG,c.build(s.DEBUG_MESSAGES.VARIATION_HASH_BUCKET_VALUE,{file:u.BucketingService,userId:e,campaignKey:t.key,percentTraffic:t.percentTraffic,bucketValue:o,hashValue:r})),f._getVariation(t.variations,o)},calculateBucketValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=f._generateHashValue(e);return f._generateBucketValue(n,a.MAX_TRAFFIC_VALUE,t)},_generateHashValue:function(e){return r.v3(e,a.SEED_VALUE)}};e.exports=f},function(e,t,n){var r,a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(25),u={NOTSET:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},l=(i(r={},u.NOTSET,"".concat(o.BOLD).concat(o.WHITE,"[NOTSET]:").concat(o.RESET)),i(r,u.DEBUG,"".concat(o.BOLD).concat(o.LIGHTBLUE,"[DEBUG]: ").concat(o.RESET)),i(r,u.INFO,"".concat(o.BOLD).concat(o.CYAN,"[INFO]:  ").concat(o.RESET)),i(r,u.WARN,"".concat(o.BOLD).concat(o.YELLOW,"[WARN]:  ").concat(o.RESET)),i(r,u.ERROR,"".concat(o.BOLD).concat(o.RED,"[ERROR]: ").concat(o.RESET)),r),s=(i(a={},u.NOTSET,"[NOTSET]:"),i(a,u.DEBUG,"[DEBUG]: "),i(a,u.INFO,"[INFO]:  "),i(a,u.WARN,"[WARN]:  "),i(a,u.ERROR,"[ERROR]: "),a);e.exports={LogLevelEnum:u,LogNumberLevel:{_0:"NOTSET",_1:"DEBUG",_2:"INFO",_3:"WARN",_4:"ERROR"},LogLevelInfoEnum:s,LogLevelColorInfoEnum:l}},function(e,t,n){var r={SegmentOperandTypes:n(32),SegmentOperatorTypes:n(33),SegmentOperandValueTypeRegexes:n(34),SegmentOperandValues:n(35)};e.exports=r},function(e,t){e.exports={BASE_URL:"dev.visualwebsiteoptimizer.com",SETTINGS_URL:"/server-side/settings",WEBHOOK_SETTINGS_URL:"/server-side/pull",TRACK_USER:"/server-side/track-user",TRACK_GOAL:"/server-side/track-goal",PUSH:"/server-side/push",BATCH_EVENTS:"/server-side/batch-events"}},function(e,t,n){var r=n(3),a=n(15),i=n(7);e.exports={get:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t){var u="https",l=a.BASE_URL,s=a.SETTINGS_URL;return o.isViaWebhook&&(s=a.WEBHOOK_SETTINGS_URL),s+="?a=".concat(e,"&")+"i=".concat(t,"&")+"r=".concat(i.getRandomNumber(),"&")+"platform=server&"+"sdk=".concat(r.SDK_NAME,"&")+"sdk-v=".concat(r.SDK_VERSION,"&")+"api-version=1",o.hostname&&o.path&&(u=o.protocol,o.port,l=o.hostname||l,s=o.path||s),n(55).send({method:"GET",url:"".concat(u,"://").concat(l).concat(s)})}console.error("AccountId and sdkKey are required for fetching account settings. Aborting!")}}},function(e,t,n){var r=n(18),a=n(2),i=n(7),o=n(10).objectValues,u=n(16),l=n(9),s=(n(3).MAX_EVENTS_PER_REQUEST,n(0)),c=n(1).INDEX,g=s.setLogHandler,f=s.setLogLevel,E=s.LogLevelEnum,d=s.LogNumberLevel,p=s.LogMessageEnum,v=s.LogMessageUtil,S=s.getLogger();function _(e){throw S.log(E.ERROR,e),new Error(S.log(E.ERROR,e))}s.setLogLevel(E.ERROR),e.exports={logging:s,setLogger:g,setLogLevel:f,getSettingsFile:u.get,GoalTypeEnum:l,launch:function(e){var t={};try{if(i.cloneObject(e),!a.isUndefined(e.shouldTrackReturningUser)&&!a.isBoolean(e.shouldTrackReturningUser))throw new Error("shouldTrackReturningUser should be boolean");if(!a.isUndefined(e.isDevelopmentMode)&&!a.isBoolean(e.isDevelopmentMode))throw new Error("isDevelopmentMode should be boolean");if(e.goalTypeToTrack&&!o(l).includes(e.goalTypeToTrack))throw new Error("goalTypeToTrack should be certain strings");if(e.logging&&e.logging.level&&!o(E).includes(e.logging.level))throw new Error("log level should be certain values");if(e.pollingInterval&&!a.isNumber(e.pollingInterval))_(v.build(p.ERROR_MESSAGES.POLLING_INTERVAL_INVALID,{file:c}));if(e.pollingInterval&&a.isUndefined(e.sdkKey))_(v.build(p.ERROR_MESSAGES.SDK_KEY_NOT_PROVIVED,{file:c}));if(e.pollingInterval&&!a.isString(e.sdkKey))_(v.build(p.ERROR_MESSAGES.SDK_KEY_NOT_STRING,{file:c}));if(!a.isUndefined(e.batchEvents)&&!a.isObject(e.batchEvents))_(v.build(p.ERROR_MESSAGES.EVENT_BATCHING_NOT_OBJECT,{file:c}));a.isObject(e.batchEvents)&&(e.batchEvents=null),t=e}catch(e){S.log(E.ERROR,v.build(p.ERROR_MESSAGES.SDK_CONFIG_CORRUPTED,{file:c})),t={}}return t.isDevelopmentMode&&s.setLogColorMode(!0),t.logging&&a.isObject(t.logging)&&(void 0!==t.logging.haveColoredLogs&&s.setLogColorMode(t.logging.haveColoredLogs),t.logging.logger&&a.isObject(t.logging.logger)&&a.isFunction(t.logging.logger.log)?(s.setLogHandler(t.logging.logger),s.setLogLevel(s.LogLevelEnum.NOTSET),S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.CUSTOM_LOGGER_USED,{file:c}))):t.logging.logger&&S.log(E.ERROR,v.build(p.ERROR_MESSAGES.CUSTOM_LOGGER_MISCONFIGURED,{file:c})),void 0!==t.logging.level&&(s.setLogLevel(t.logging.level),S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.LOG_LEVEL_SET,{file:c,level:d["_"+t.logging.level]})))),t.isDevelopmentMode&&S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.SET_DEVELOPMENT_MODE,{file:c})),t.logger=t.logger||S,new r(t)}}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(19),i=n(49),o=n(52);var u=n(0),l=n(1),s=u.LogLevelEnum,c=u.LogMessageEnum,g=u.LogMessageUtil,f=l.VWO,E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getVariation=this.getVariationName,this.userStorageService=t.userStorageService,this.logger=t.logger;var n=new o(t);n.isSettingsFileValid()?(this.logger.log(s.DEBUG,g.build(c.DEBUG_MESSAGES.VALID_CONFIGURATION,{file:f})),n.checkAndPoll(),this.eventQueue=new i,this.SettingsFileManager=n,this.SettingsFileManager.processSettingsFile(),this.logger.log(s.DEBUG,g.build(c.DEBUG_MESSAGES.SDK_INITIALIZED,{file:f}))):this.logger.log(s.ERROR,g.build(c.ERROR_MESSAGES.INVALID_SETTINGS_FILE,{file:f}))}var t,n,u;return t=e,(n=[{key:"activate",value:function(e,t,n){try{return a.activate(this,e,t,n)}catch(e){return this.logger.log(s.ERROR,e.message),null}}},{key:"getVariationName",value:function(e,t,n){try{return a.getVariation(this,e,t,n)}catch(e){return this.logger.log(s.ERROR,e.message),null}}},{key:"track",value:function(e,t,n,r){try{return a.track(this,e,t,n,r)}catch(e){return this.logger.log(s.ERROR,e.message),null}}},{key:"isFeatureEnabled",value:function(e,t,n){try{return a.isFeatureEnabled(this,e,t,n)}catch(e){return this.logger.log(s.ERROR,e.message),!1}}},{key:"getFeatureVariableValue",value:function(e,t,n,r){try{return a.getFeatureVariableValue(this,e,t,n,r)}catch(e){return this.logger.log(s.ERROR,e.message),null}}},{key:"push",value:function(e,t,n){try{return a.push(this,e,t,n)}catch(e){return this.logger.log(s.ERROR,e.message),!1}}},{key:"flushEvents",value:function(){}},{key:"getAndUpdateSettingsFile",value:function(e,t){return this.SettingsFileManager.getAndUpdateSettingsFile(e,t)}}])&&r(t.prototype,n),u&&r(t,u),e}();e.exports=E},function(e,t,n){var r=n(20),a=n(42),i=n(43),o=n(44),u=n(45),l=n(48);e.exports={activate:r,getVariation:a,track:i,isFeatureEnabled:o,getFeatureVariableValue:u,push:l}},function(e,t,n){var r=n(3),a=n(6),i=n(8),o=n(5),u=n(11),l=n(4),s=n(2),c=n(0),g=n(1),f=c.LogLevelEnum,E=c.LogMessageEnum,d=c.LogMessageUtil,p=g.Activate;e.exports=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=a.ACTIVATE,v=!1;if(s.isObject(c)){var S=c.customVariables,_=c.variationTargetingVariables,R=c.userStorageData;l.areValidParamsForAPIMethod({method:a.ACTIVATE,campaignKey:t,userId:n,customVariables:S,variationTargetingVariables:_,userStorageData:R})&&(v=!0)}if(!1===v)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.ACTIVATE_API_MISSING_PARAMS,{file:p})),null;var A=e.SettingsFileManager.getConfig(),I=e.SettingsFileManager.getSettingsFile(g);if(!I)return null;var b=o.getCampaign(I,t);if(!b||b.status!==r.STATUS_RUNNING)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:p,campaignKey:t,api:g})),null;if(!o.isAbCampaign(b))return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.INVALID_API,{file:p,campaignKey:t,campaignType:b.type,userId:n,api:g})),null;var y=i.getVariation(A,I,b,t,n,S,_,R),O=y.variationId,m=y.variationName;if(!l.isValidValue(m))return e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.INVALID_VARIATION_KEY,{file:p,userId:n,campaignKey:t})),null;if(A.batchEvents){var T=u.buildBatchEventForTrackingUser(I,b.id,O,n);e.batchEventsQueue.enqueue(T)}else{var h=u.buildEventForTrackingUser(I,b.id,O,n);e.eventQueue.process(A,h,e)}return m}},function(e,t,n){var r=n(4),a=n(12),i=n(0),o=n(1),u=i.LogLevelEnum,l=i.LogMessageEnum,s=i.LogMessageUtil,c=i.getLogger(),g={getVariationAllotted:function(e,t){var n={variation:null,variationId:null,variationName:null};if(!r.isValidValue(e))return c.log(u.ERROR,s.build(l.ERROR_MESSAGES.INVALID_USER_ID,{file:o.BucketingService,userId:e,method:"getVariationAllotted"})),n;if(a.isUserPartOfCampaign(e,t)){var i=g.getVariationOfCampaignForUser(e,t)||{};n.variation=i,n.variationId=i.id,n.variationName=i.name,c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.GOT_VARIATION_FOR_USER,{file:o.VariationDecider,variationName:i.name,userId:e,campaignKey:t.key,method:"getVariationAllotted"}))}else c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.USER_NOT_PART_OF_CAMPAIGN,{file:o.VariationDecider,userId:e,campaignKey:t.key,method:"getVariationAllotted"}));return n},getVariationOfCampaignForUser:function(e,t){if(!r.isValidValue(e)||!t)return null;var n=a.bucketUserToVariation(e,t);return n&&n.name?(c.log(u.INFO,s.build(l.INFO_MESSAGES.GOT_VARIATION_FOR_USER,{file:o.VariationDecider,variationName:n.name,userId:e,campaignKey:t.key})),{variation:n,name:n.name,id:n.id}):(c.log(u.INFO,s.build(l.INFO_MESSAGES.USER_GOT_NO_VARIATION,{file:o.VariationDecider,userId:e,campaignKey:t.key})),null)}};e.exports=g},function(e,t){e.exports={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",OBJECT:"object"}},function(e,t,n){!function(){function t(e,t){var n,r,a,i,o,u,l,s;for(n=3&e.length,r=e.length-n,a=t,o=3432918353,u=461845907,s=0;s<r;)l=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,a=27492+(65535&(i=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*u+(((l>>>16)*u&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(s+2))<<16;case 2:l^=(255&e.charCodeAt(s+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(s)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*u+(((l>>>16)*u&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}var n=t;n.v2=function(e,t){for(var n,r=e.length,a=t^r,i=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++i;switch(r){case 3:a^=(255&e.charCodeAt(i+2))<<16;case 2:a^=(255&e.charCodeAt(i+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(i)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0},n.v3=t,e.exports=n}()},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(13),i=a.LogLevelEnum,o=a.LogNumberLevel,u=n(26),l=n(27),s=n(28),c=i.NOTSET,g=!1,f=new s,E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.isColoredLogEnabled=g}var t,n,a;return t=e,(n=[{key:"_customLog",value:function(e,t){e<c||f.log(e,t)}},{key:"log",value:function(e,t){try{this._customLog(e,t)}catch(e){console.error("VWO: Could not log.",e)}}},{key:"info",value:function(e){this._customLog(i.INFO,e)}},{key:"debug",value:function(e){this._customLog(i.DEBUG,e)}},{key:"warn",value:function(e){this._customLog(i.WARN,e)}},{key:"error",value:function(e){this._customLog(i.ERROR,e)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports={LogLevelEnum:i,LogNumberLevel:o,LogMessageUtil:l,LogMessageEnum:u,getLogger:function(e){return new E(e)},setLogHandler:function(e){f=e},setLogLevel:function(e){c=void 0===e?i.ERROR:e},getLogLevel:function(){return c},LogManager:E,setLogColorMode:function(e){g=e,f.isColoredLogEnabled=g},getLogColorMode:function(){return g},globalLogHandler:f}},function(e,t){e.exports={BOLD:"[1m",CYAN:"[36m",GREEN:"[32m",LIGHTBLUE:"[94m",RED:"[31m",RESET:"[0m",WHITE:"[30m",YELLOW:"[33m"}},function(e,t){e.exports={DEBUG_MESSAGES:{CUSTOM_LOGGER_USED:"({file}): Custom logger used",GETTING_STORED_VARIATION:"({file}): Got stored variation for User ID:{userId} of Campaign:{campaignKey} as Variation:{variationName}, found in UserStorageService",GOT_FROM_CACHE:"({file}): Got data from cache for the finalKey:{finalKey}",GOT_VARIATION_FOR_USER:"({file}): User ID:{userId} for Campaign:{campaignKey} got variationName:{variationName} inside method:{method}",IMPRESSION_FOR_PUSH:"({file}): impression built for pushing - {properties}",IMPRESSION_FOR_TRACK_GOAL:"({file}): impression built for track-goal - {properties}",IMPRESSION_FOR_TRACK_USER:"({file}): impression built for track-user - {properties}",LOG_LEVEL_SET:"({file}): Log level set to {level}",NO_STORED_VARIATION:"({file}): No stored variation for User ID:{userId} for Campaign:{campaignKey} found in UserStorageService",NO_USER_STORAGE_SERVICE_GET:"({file}): No UserStorageService to get stored data",NO_USER_STORAGE_SERVICE_SET:"({file}): No UserStorageService to set data",RESET_CACHE:"({file}): Cache Reset on VWO instantiation",SDK_INITIALIZED:"({file}): SDK properly initialzed",SEGMENTATION_SKIPPED:"({file}): For userId:{userId} of Campaign:{campaignKey}, segment was missing, hence skipping segmentation{variation}",SEGMENTATION_STATUS:"({file}): For userId:{userId} of Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}",SET_DEVELOPMENT_MODE:"({file}): DEVELOPMENT mode is ON",SET_IN_CACHE:"({file}): Set data in cache for the finalKey:{finalKey}",SETTINGS_FILE_PROCESSED:"({file}): Settings file processed",USER_HASH_BUCKET_VALUE:"({file}): User ID:{userId} having hash:{hashValue} got bucketValue:{bucketValue}",USER_NOT_PART_OF_Campaign:"({file}): userId:{userId} for Campaign:{campaignKey} did not become part of campaign, method:{method}",UUID_FOR_USER:"({file}): Uuid generated for User ID:{userId} and accountId:{accountId} is {desiredUuid}",VALID_CONFIGURATION:"({file}): SDK configuration and account settings are valid",VARIATION_HASH_BUCKET_VALUE:"({file}): User ID:{userId} for Campaign:{campaignKey} having percent traffic:{percentTraffic} got hash-value:{hashValue} and bucket value:{bucketValue}",WHITELISTING_SKIPPED:"({file}): For userId:{userId} of Campaign:{campaignKey}, whitelisting was skipped",STARTED_POLLING:"({file}): Polling of settings-file is registered with a periodic interval of {pollingInterval}ms",BATCH_EVENT_LIMIT_EXCEEDED:"({file}): Impression event - {endPoint} failed due to exceeding payload size. Parameter eventsPerRequest in batchEvents config in launch API has value:{eventsPerRequest} for accountId:{accountId}. Please read the official documentation for knowing the size limits",BULK_NOT_PROCESSED:"({file}): Batch events couldn't be received by VWO. Calling Flush Callback with error and data",BEFORE_FLUSHING:"({file}): Flushing events queue {manually} having {length} events for account:{accountId}. {timer}",FLUSH_EVENTS:"{{file}}: Manually flushing events for account:{accountId} having {queueLength} events"},ERROR_MESSAGES:{API_HAS_CORRUPTED_SETTINGS_FILE:'({file}): "{api}" API has corrupted settings-file. Please check or reach out to VWO support',ACTIVATE_API_MISSING_PARAMS:'({file}): "activate" API got bad parameters. It expects campaignKey(String) as first, userId(String) as second and options(optional Object) as third argument',CAMPAIGN_NOT_RUNNING:"({file}): API used:{api} - Campaign:{campaignKey} is not RUNNING. Please verify from VWO App",GET_FEATURE_VARIABLE_MISSING_PARAMS:'({file}): "getFeatureVariableValue" API got bad parameters. It expects campaignKey(String) as first, variableKey(String) as second, userId(String) as third, and options(optional Object) as fourth argument',GET_VARIATION_API_MISSING_PARAMS:'({file}): "getVariation" API got bad parameters. It expects campaignKey(String) as first, userId(String) as second and options(optional Object) as third argument',IMPRESSION_FAILED:"({file}): Impression event could not be sent to VWO - {endPoint}. Reason: {err}",INVALID_API:"({file}): {api} API is not valid for Campaign:{campaignKey} of type:{campaignType} for User ID:{userId}",INVALID_SETTINGS_FILE:"({file}): Settings-file fetched is not proper",IS_FEATURE_ENABLED_API_MISSING_PARAMS:'({file}): "isFeatureEnabled" API got bad parameters. It expects Campaign(String) as first, userId(String) as second and options(optional Object) as third argument',GET_USER_STORAGE_SERVICE_FAILED:"({file}): Getting data from UserStorageService failed for User ID:{userId}",SDK_CONFIG_CORRUPTED:"({file}): config passed to launch API is not a valid JSON object",PUSH_INVALID_PARAMS:'({file}): "{method}" API got bad parameters. It expects tagKey(String) as first, tagValue(String) as second and userId(String) as third argument',REGEX_CREATION_FAILED:"({file}): Regex cound not be processed",SET_USER_STORAGE_SERVICE_FAILED:"({file}): Saving data into UserStorageService failed for User ID:{userId}",SEGMENTATION_ERROR:"({file}): Error while segmenting the user:{userId} of Campaign:{campaignKey}{variation} with customVariables:{customVariables}. Error message: {err}",SETTINGS_FILE_CORRUPTED:"({file}): Settings file is corrupted. Please contact VWO Support for help",TAG_KEY_LENGTH_EXCEEDED:"({file}): Length of tagKey:{tagKey} for userID:{userId} can not be greater than 255",TAG_VALUE_LENGTH_EXCEEDED:"({file}): Length of value:{tagValue} of tagKey:{tagKey} for userID:{userId} can not be greater than 255",TRACK_API_GOAL_NOT_FOUND:"({file}): Goal:{goalIdentifier} not found for Campaign:{campaignKey} and userId:{userId}",TRACK_API_MISSING_PARAMS:'({file}): "track" API got bad parameters. It expects campaignKey(String or Array of strings or null or undefined) as first, userId(String) as second, goalIdentifier(String/Number) as third and options(optional Object) as fourth argument',TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL:"({file}): Revenue value should be passed for revenue goal:{goalIdentifier} for Campaign:{campaignKey} and userId:{userId}",UNABLE_TO_CAST_VALUE:"({file}): Unable to cast value:{variableValue} to type:{variableType}, returning null",VARIABLE_NOT_FOUND:"({file}): Variable:{variableKey} for User ID:{userId} is not found in settings-file. Returning null",NO_CAMPAIGN_FOUND:"({file}): No campaign found for goalIdentifier:{goalIdentifier}. Please verify from VWO app.",POLLING_FAILED:"({file}): Failed fetching of Settings-file via polling for the accountId:{accountId}",POLLING_INTERVAL_INVALID:"({file}): pollingParameter provided is not of type number",SDK_KEY_NOT_PROVIVED:"({file}): sdkKey is required along with pollingInterval to poll the settings-file",SDK_KEY_NOT_STRING:"({file}): sdkKey provided is not of type string",INVALID_USER_ID:"({file}): Invalid userId:{userId} passed to {method} of this file",EVENT_BATCHING_NOT_OBJECT:"({file}): Batch events settings are not of type object",NO_BATCH_QUEUE:"{{file}}: No batch queue present for account:{accountId} when calling flushEvents API. Check batchEvents config in launch API"},INFO_MESSAGES:{FEATURE_ENABLED_FOR_USER:"({file}): Campaign:{campaignKey} for user ID:{userId} is enabled",FEATURE_NOT_ENABLED_FOR_USER:"({file}): Campaign:{campaignKey} for user ID:{userId} is not enabled",IMPRESSION_SUCCESS:"({file}): Impression event - {endPoint} was successfully received by VWO having main keys: accountId:{accountId}, User ID:{userId}, campaignId:{campaignId} and variationId:{variationId}",INVALID_VARIATION_KEY:"({file}): Variation was not assigned to User ID:{userId} for Campaign:{campaignKey}",GETTING_DATA_USER_STORAGE_SERVICE:"({file}): Getting data from UserStorageService for User ID:{userId} successful",SETTING_DATA_USER_STORAGE_SERVICE:"({file}): Setting data into UserStorageService for User ID:{userId} successful",SEGMENTATION_STATUS:"({file}): UserId:{userId} of Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}",USER_GOT_NO_VARIATION:"({file}): User ID:{userId} for Campaign:{campaignKey} did not allot any variation",USER_RECEIVED_VARIABLE_VALUE:"({file}): Value for variable:{variableKey} of feature flag:{campaignKey} is:{variableValue} for user:{userId}",VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:"({file}): Variable:{variableKey} is not used in variation:{variationName}. Returning default value",VARIATION_ALLOCATED:"({file}): User ID:{userId} of Campaign:{campaignKey} got variation:{variationName}",NO_VARIATION_ALLOCATED:"({file}): User ID:{userId} of Campaign:{campaignKey} did not get any variation",VARIATION_RANGE_ALLOCATION:"({file}): Campaign:{campaignKey} having variation:{variationName} with weight:{variationWeight} got range as: ( {start} - {end} ))",GOAL_ALREADY_TRACKED:'({file}): "Goal:{goalIdentifer} of Campaign:{campaignKey} for User ID:{userId} has already been tracked earlier. Skipping now',POLLING_SUCCESS:"({file}): Settings-file fetched successfully via polling for the accountId:{accountId}",SETTINGS_FILE_UPDATED:"({file}): vwo-sdk instance is updated with the latest settings-file for the accountId:{accountId}",USER_ELIGIBILITY_FOR_CAMPAIGN:"({file}): Is User ID:{userId} part of campaign? {isUserPart}",GOT_VARIATION_FOR_USER:"({file}): userId:{userId} for campaign:{campaignTestKey} got variationName:{variationName}",BULK_IMPRESSION_SUCCESS:"({file}): Impression event - {endPoint} was successfully received by VWO having accountId:{a}",AFTER_FLUSHING:"({file}): Events queue having {length} events has been flushed {manually}",SETTINGS_NOT_UPDATED:"{{file}}: Settings-file fetched are same as earlier fetched settings",GOT_STORED_VARIATION:"({file}): Got stored variation for User ID:{userId} of Campaign:{campaignKey} as Variation:{variationName}, found in UserStorageService"},WARNING_MESSAGES:{}}},function(e,t,n){var r=n(2),a=/\{([0-9a-zA-Z_]+)\}/g,i={build:function(e,t){try{return e.replace(a,(function(n,a,i){var o;if("{"===e[i-1]&&"}"===e[i+n.length])return a;if(t.hasOwnProperty(a)){var u=t[a];r.isFunction(u)&&(u=t[a]()),o=u}else o=null;return null==o?"":o}))}catch(t){return e}}};e.exports=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(13),i=a.LogLevelEnum,o=a.LogLevelInfoEnum,u=a.LogLevelColorInfoEnum,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logLevel=i.NOTSET,this.prefix="VWO-SDK",this.isColoredLogEnabled=!1}var t,n,a;return t=e,(n=[{key:"log",value:function(e,t){var n;this.shouldLog(e)&&(n=this.isColoredLogEnabled?"".concat(this.prefix," - ").concat(u[e]," ").concat(this.getCurrentTime()," ").concat(t):"".concat(this.prefix," - ").concat(o[e]," ").concat(this.getCurrentTime()," ").concat(t),this.consoleLog(e,[n]))}},{key:"shouldLog",value:function(e){return e>=this.logLevel}},{key:"getCurrentTime",value:function(){return(new Date).toISOString()}},{key:"setLogLevel",value:function(e){this.logLevel=void 0===e?i.ERROR:e}},{key:"consoleLog",value:function(e,t){switch(e){case i.INFO:console.info.apply(console,t);break;case i.WARN:console.warn.apply(console,t);break;case i.ERROR:console.error.apply(console,t);break;default:console.log.apply(console,t)}}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=l},function(e,t){e.exports={FEATURE_TEST:"FEATURE_TEST",FEATURE_ROLLOUT:"FEATURE_ROLLOUT",AB:"VISUAL_AB"}},function(e,t){e.exports={PASSED:"passed",FAILED:"failed"}},function(e,t,n){var r=n(14),a=n(10).getKeyValue,i=n(36),o=i.operandCustomVariablesParser,u=i.operandUserParser,l=n(0),s=n(2),c=n(1),g=r.SegmentOperatorTypes,f=g.AND,E=g.OR,d=g.NOT,p=r.SegmentOperandTypes,v=p.CUSTOM_VARIABLE,S=p.USER,_=l.LogLevelEnum,R=l.LogMessageEnum,A=l.LogMessageUtil,I=c.SegmentEvaluator,b=l.getLogger();e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";try{return s.isObject(e)&&!Object.keys(e).length?(b.log(_.DEBUG,A.build(R.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:n,userId:r,file:I})),!0):!s.isObject(e)||!Object.keys(e).length||function e(t,n){var r=a(t),i=r.key,l=r.value;var s=i;var c=l;if(s===d)return!e(c,n);if(s===f){for(var g=[],p=0;p<c.length;p++)g.push(e(c[p],n));return g.every((function(e){return e}))}if(s===E){for(var _=[],R=0;R<c.length;R++)_.push(e(c[R],n));return _.some((function(e){return e}))}if(s===v)return o(c,n);if(s===S)return u(c,n)}(e,t)}catch(e){return b.log(_.ERROR,A.build(R.ERROR_MESSAGES.SEGMENTATION_ERROR,{campaignKey:n,userId:r,customVariables:JSON.stringify(t),file:I,err:e,variation:i})),!1}}},function(e,t){e.exports={CUSTOM_VARIABLE:"custom_variable",USER:"user"}},function(e,t){e.exports={AND:"and",NOT:"not",OR:"or"}},function(e,t){e.exports={LOWER:/^lower/,LOWER_MATCH:/^lower\((.*)\)/,WILDCARD:/^wildcard/,WILDCARD_MATCH:/^wildcard\((.*)\)/,REGEX:/^regex/,REGEX_MATCH:/^regex\((.*)\)/,STARTING_STAR:/^\*/,ENDING_STAR:/\*$/}},function(e,t){e.exports={LOWER_VALUE:1,STARTING_ENDING_STAR_VALUE:2,STARTING_STAR_VALUE:3,ENDING_STAR_VALUE:4,REGEX_VALUE:5,EQUAL_VALUE:6}},function(e,t,n){var r=n(2),a=n(7).matchWithRegex,i=n(10).getKeyValue,o=n(14),u=o.SegmentOperandValueTypeRegexes,l=u.LOWER_MATCH,s=u.WILDCARD_MATCH,c=u.REGEX_MATCH,g=u.STARTING_STAR,f=u.ENDING_STAR,E=o.SegmentOperandValues,d=E.LOWER_VALUE,p=E.STARTING_ENDING_STAR_VALUE,v=E.STARTING_STAR_VALUE,S=E.ENDING_STAR_VALUE,_=E.REGEX_VALUE,R=E.EQUAL_VALUE;function A(e,t){return a(e,t)&&a(e,t)[1]}function I(e,t){var n=parseFloat(e,10),r=parseFloat(t,10);return n&&r?(n===Math.floor(n)&&(n=parseInt(n,10)),r===Math.floor(r)&&(r=parseInt(r,10)),{operandValue:n.toString(),tagValue:r.toString()}):{operandValue:e,tagValue:t}}function b(e){return void 0===e&&(e=""),r.isBoolean(e)&&(e=!!e),null!==e&&(e=e.toString()),e}function y(e){var t,n,r,i;return a(e,l)?(t=d,n=A(e,l)):a(e,s)?(n=A(e,s),r=a(n,g),i=a(n,f),r&&i?t=p:r?t=v:i&&(t=S),n=n.replace(g,"").replace(f,"")):a(e,c)?(t=_,n=A(e,c)):(t=R,n=e),{operandType:t,operandValue:n}}e.exports={extractOperandValue:A,processValues:I,preProcessTagValue:b,preProcessOperandValue:y,operandCustomVariablesParser:function(e,t){var n=i(e),r=n.key,a=r;if(e=n.value,!t.hasOwnProperty(r))return!1;var o=t[a];o=b(o);var u=y(e),l=u.operandType,s=I(u.operandValue,o);return o=s.tagValue,function(e,t,n){var r;switch(e){case d:null!==n&&(r=t.toLowerCase()===n.toLowerCase());break;case p:null!==n&&(r=n.indexOf(t)>-1);break;case v:null!==n&&(r=n.endsWith(t));break;case S:null!==n&&(r=n.startsWith(t));break;case _:try{var a=new RegExp(t,"g");r=!!a.test(n)}catch(e){r=!1}break;default:r=n===t}return r}(l,s.operandValue,o)},operandUserParser:function(e,t){for(var n=e.split(","),r=0;r<n.length;r++)if(n[r].trim()===t._vwoUserId)return!0;return!1}}},function(e,t,n){var r=n(38),a=n(3),i=n(0),o=n(1),u=i.LogLevelEnum,l=i.LogMessageEnum,s=i.LogMessageUtil,c=i.getLogger(),g=r(a.SEED_URL,r.URL),f={generateFor:function(e,t){e="".concat(e);var n="".concat(t),r=f.generate(n,g),a=f.generate(e,r).replace(/-/gi,"").toUpperCase();return c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.UUID_FOR_USER,{file:o.UuidUtil,userId:e,accountId:t,desiredUuid:a})),a},generate:function(e,t){if(e&&t)return r(e,t)}};e.exports=f},function(e,t,n){var r=n(39),a=n(41);e.exports=r("v5",80,a)},function(e,t,n){var r=n(40);e.exports=function(e,t,n){var a=function(e,a,i,o){var u=i&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof a&&(a=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(a)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(a)||16!==a.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var l=n(a.concat(e));if(l[6]=15&l[6]|t,l[8]=63&l[8]|128,i)for(var s=0;s<16;++s)i[u+s]=l[s];return i||r(l)};try{a.name=e}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function a(e,t){return e<<t|e>>>32-t}e.exports=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=new Array(i.length);for(var o=0;o<i.length;o++)e[o]=i.charCodeAt(o)}e.push(128);var u=e.length/4+2,l=Math.ceil(u/16),s=new Array(l);for(o=0;o<l;o++){s[o]=new Array(16);for(var c=0;c<16;c++)s[o][c]=e[64*o+4*c]<<24|e[64*o+4*c+1]<<16|e[64*o+4*c+2]<<8|e[64*o+4*c+3]}for(s[l-1][14]=8*(e.length-1)/Math.pow(2,32),s[l-1][14]=Math.floor(s[l-1][14]),s[l-1][15]=8*(e.length-1)&4294967295,o=0;o<l;o++){for(var g=new Array(80),f=0;f<16;f++)g[f]=s[o][f];for(f=16;f<80;f++)g[f]=a(g[f-3]^g[f-8]^g[f-14]^g[f-16],1);var E=n[0],d=n[1],p=n[2],v=n[3],S=n[4];for(f=0;f<80;f++){var _=Math.floor(f/20),R=a(E,5)+r(_,d,p,v)+S+t[_]+g[f]>>>0;S=v,v=p,p=a(d,30)>>>0,d=E,E=R}n[0]=n[0]+E>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+S>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},function(e,t,n){var r=n(3),a=n(6),i=n(8),o=n(5),u=n(4),l=n(2),s=n(0),c=n(1),g=s.LogLevelEnum,f=s.LogMessageEnum,E=s.LogMessageUtil,d=c.GetVariation;e.exports=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.GET_VARIATION_NAME,p=!1;if(l.isObject(s)){var v=s.customVariables,S=s.variationTargetingVariables,_=s.userStorageData;u.areValidParamsForAPIMethod({method:a.GET_VARIATION_NAME,campaignKey:t,userId:n,customVariables:v,variationTargetingVariables:S,userStorageData:_})&&(p=!0)}if(!1===p)return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.GET_VARIATION_API_MISSING_PARAMS,{file:d})),null;var R=e.SettingsFileManager.getConfig(),A=e.SettingsFileManager.getSettingsFile(c);if(!A)return null;var I=o.getCampaign(A,t);if(!I||I.status!==r.STATUS_RUNNING)return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:d,campaignKey:t,api:c})),null;if(o.isFeatureRolloutCampaign(I))return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.INVALID_API,{file:d,campaignKey:t,campaignType:I.type,userId:n,api:c})),null;var b=i.getVariation(R,A,I,t,n,v,S,_).variationName;return b||null}},function(e,t,n){var r=n(3),a=n(9),i=n(6),o=n(8),u=n(5),l=n(10).objectValues,s=n(11),c=n(4),g=n(2),f=n(0),E=n(1),d=f.LogLevelEnum,p=f.LogMessageEnum,v=f.LogMessageUtil,S=E.Track,_=a.ALL,R="_vwo_",A=i.TRACK;e.exports=function(e,t,n,f){var E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},I=!1;if(g.isObject(E)){var b=E.revenueValue,y=E.customVariables,O=E.variationTargetingVariables,m=E.userStorageData,T=E.goalTypeToTrack,h=E.shouldTrackReturningUser;c.areValidParamsForAPIMethod({method:i.TRACK,campaignKey:t,userId:n,goalIdentifier:f,customVariables:y,variationTargetingVariables:O,userStorageData:m,goalTypeToTrack:T,shouldTrackReturningUser:h})&&(!T||T&&l(a).includes(T))&&(I=!0)}if(!1===I)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_MISSING_PARAMS,{file:S})),null;var N=e.SettingsFileManager.getConfig(),U=e.SettingsFileManager.getSettingsFile(A);if(!U)return null;var L=[];if(T=T||N.goalTypeToTrack||_,g.isUndefined(h)&&(h=!!g.isBoolean(N.shouldTrackReturningUser)&&N.shouldTrackReturningUser),g.isString(t)){var V=u.getCampaign(U,t);L.push(V||{key:t})}else L=g.isArray(t)?u.getCampaignsForKeys(U,t):u.getCampaignsForGoal(U,f,T);var G={};return L.forEach((function(t){return G[t.key]=function(e,t,n,i,l,g,f,E,I,b,y,O,m){if(!t||t.status!==r.STATUS_RUNNING)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:S,campaignKey:n,api:A})),!1;if(u.isFeatureRolloutCampaign(t))return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.INVALID_API,{file:S,campaignKey:n,campaignType:t.type,userId:i,api:A})),!1;var T=t.id,h=u.getCampaignGoal(l,t.key,g);if(!h)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_GOAL_NOT_FOUND,{file:S,userId:i,goalIdentifier:g,campaignKey:n})),!1;if(O!==_&&h.type!==O)return!1;if(h.type===a.REVENUE&&!c.isValidValue(f))return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL,{file:S,userId:i,goalIdentifier:g,campaignKey:n})),!1;var N=o.getVariation(E,l,t,n,i,I,b,y,g),U=N.variationId,L=N.variationName,V=N.storedGoalIdentifier;if(L){if(V)if(V.split(R).includes(g)){if(!m)return e.logger.log(d.INFO,v.build(p.INFO_MESSAGES.GOAL_ALREADY_TRACKED,{file:S,userId:i,goalIdentifier:g,campaignKey:n})),!1}else V+=R+g,o._saveUserData(E,t,L,i,V);if(E.batchEvents){var G=s.buildBatchEventForTrackingGoal(l,T,U,i,h,f);e.batchEventsQueue.enqueue(G)}else{var D=s.buildEventForTrackingGoal(l,T,U,i,h,f);e.eventQueue.process(E,D,e)}return o._saveUserData(E,t,L,i,g),!0}return!1}(e,t,t.key,n,U,f,b,N,y,O,m,T,h)})),Object.keys(G).length?G:null}},function(e,t,n){var r=n(3),a=n(6),i=n(8),o=n(5),u=n(11),l=n(4),s=n(2),c=n(0),g=n(1),f=c.LogLevelEnum,E=c.LogMessageEnum,d=c.LogMessageUtil,p=g.IsFeatureEnabled;e.exports=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=a.IS_FEATURE_ENABLED,v=!1;if(s.isObject(c)){var S=c.customVariables,_=c.variationTargetingVariables,R=c.userStorageData;l.areValidParamsForAPIMethod({method:a.IS_FEATURE_ENABLED,campaignKey:t,userId:n,customVariables:S,variationTargetingVariables:_,userStorageData:R})&&(v=!0)}if(!1===v)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.IS_FEATURE_ENABLED_API_MISSING_PARAMS,{file:p})),!1;var A=e.SettingsFileManager.getConfig(),I=e.SettingsFileManager.getSettingsFile(g);if(!I)return!1;var b=o.getCampaign(I,t);if(!b||b.status!==r.STATUS_RUNNING)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:p,campaignKey:t,api:g})),!1;if(o.isAbCampaign(b))return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.INVALID_API,{file:p,campaignKey:t,campaignType:b.type,userId:n,api:g})),!1;var y=i.getVariation(A,I,b,t,n,S,_,R),O=y.variation,m=y.variationName,T=y.variationId,h=!1;if(m&&o.isFeatureTestCampaign(b))if(h=O.isFeatureEnabled,A.batchEvents){var N=u.buildBatchEventForTrackingUser(I,b.id,T,n);e.batchEventsQueue.enqueue(N)}else{var U=u.buildEventForTrackingUser(I,b.id,T,n);e.eventQueue.process(A,U,e)}else m&&o.isFeatureRolloutCampaign(b)&&(h=!0);return h?e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.FEATURE_ENABLED_FOR_USER,{file:p,campaignKey:t,userId:n})):e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.FEATURE_NOT_ENABLED_FOR_USER,{file:p,campaignKey:t,userId:n})),h}},function(e,t,n){var r=n(3),a=n(6),i=n(8),o=n(5),u=n(4),l=n(46),s=n(2),c=n(10),g=n(0),f=n(1),E=g.LogLevelEnum,d=g.LogMessageEnum,p=g.LogMessageUtil,v=f.GetFeatureVariableValue;e.exports=function(e,t,n,g){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{var S=a.GET_FEATURE_VARIABLE_VALUE,_=!1;if(s.isObject(f)){var R=f.customVariables,A=f.variationTargetingVariables,I=f.userStorageData;u.areValidParamsForAPIMethod({method:a.GET_FEATURE_VARIABLE_VALUE,campaignKey:t,variableKey:n,userId:g,customVariables:R,variationTargetingVariables:A,userStorageData:I})&&(_=!0)}if(!1===_)return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.GET_FEATURE_VARIABLE_MISSING_PARAMS,{file:v,campaignKey:t,variableKey:n})),null;var b=e.SettingsFileManager.getConfig(),y=e.SettingsFileManager.getSettingsFile(S);if(!y)return null;var O,m=o.getCampaign(y,t);if(!m||m.status!==r.STATUS_RUNNING)return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:v,campaignKey:t,api:S})),null;if(o.isAbCampaign(m))return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.INVALID_API,{file:v,campaignKey:t,campaignType:m.type,userId:g,api:S})),null;var T=i.getVariation(b,y,m,t,g,R,A,I),h=T.variation,N=T.variationName;if(!N)return e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.FEATURE_NOT_ENABLED_FOR_USER,{file:v,campaignKey:t,userId:g})),null;if(o.isFeatureRolloutCampaign(m)?O=l.getVariableForFeature(m,n):o.isFeatureTestCampaign(m)&&(O=l.getVariableValueForVariation(m,h,n),c.areObjectKeys(O)&&h.isFeatureEnabled?e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.USER_RECEIVED_VARIABLE_VALUE,{file:v,variableKey:n,campaignKey:m.key,variableValue:O.value,userId:g})):c.areObjectKeys(O)&&!h.isFeatureEnabled&&e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,{file:v,variableKey:n,variationName:N}))),!c.areObjectKeys(O))return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.VARIABLE_NOT_FOUND,{file:v,variableKey:n,userId:g})),null;var U=O.value;return l.getTypeCastVariableValue(U,O.type)}catch(t){return e.logger.log(E.ERROR,t.message),null}}},function(e,t,n){var r=n(5),a=n(2),i=n(47),o=n(0),u=n(1),l=o.LogLevelEnum,s=o.LogMessageEnum,c=o.LogMessageUtil,g=o.getLogger(),f=u.FeatureUtil,E={getVariableForFeature:function(e,t){var n={};if(r.isFeatureRolloutCampaign(e)){for(var a=e.variables||[],i=0;i<a.length;i++)if(a[i].key===t){n=a[i];break}return n}return n},getVariableValueForVariation:function(e,t,n){var a={};if(r.isFeatureTestCampaign(e)){if(!t||!t||!t.variables)return a;t.isFeatureEnabled||(t=r.getControlForCampaign(e));for(var i=0;i<t.variables.length;i++){var o=t.variables[i];if(n===o.key){a=o;break}}}return a},getTypeCastVariableValue:function(e,t){var n;switch(t){case i.INTEGER:n=parseInt(e,10),a.isNumber(n)&&!isNaN(n)||(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),n=null);break;case i.DOUBLE:n=parseFloat(e),a.isNumber(n)&&!isNaN(n)||(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),n=null);break;case i.BOOLEAN:a.isBoolean(e)?n=e:(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),n=null);break;default:n=e}return n}};e.exports=E},function(e,t){e.exports={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string"}},function(e,t,n){var r=n(6),a=n(0),i=n(1),o=n(4),u=n(11),l=a.LogLevelEnum,s=a.LogMessageEnum,c=a.LogMessageUtil,g=i.Push;e.exports=function(e,t,n,a){var i=r.PUSH;if(!o.areValidParamsForAPIMethod({method:r.PUSH,tagKey:t,tagValue:n,userId:a}))return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.PUSH_INVALID_PARAMS,{file:g,method:i})),!1;if(t.length>255)return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.TAG_KEY_LENGTH_EXCEEDED,{file:g,tagKey:t,userId:a})),!1;if(n.length>255)return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.TAG_VALUE_LENGTH_EXCEEDED,{file:g,tagKey:t,userId:a,tagValue:n})),!1;var f=e.SettingsFileManager.getConfig(),E=e.SettingsFileManager.getSettingsFile(i);if(!E)return!1;if(f.batchEvents){var d=u.buildBatchEventForPushing(E,t,n,a);e.batchEventsQueue.enqueue(d)}else{var p=u.buildEventForPushing(E,t,n,a);e.eventQueue.process(f,p,e)}return!0}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(2),i=n(50),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.running=!1,this.queue=[]}var t,n,o;return t=e,(n=[{key:"process",value:function(e,t,n){e&&e.isDevelopmentMode||this.enqueue(t,n)}},{key:"enqueue",value:function(e,t){return this.queue.push({eventName:e.eventName,properties:e,callback:function(){i.dispatch(e,(function(){}))}}),t.eventQueue.executeNext(e),this.running||this.executeNext(e),this}},{key:"executeNext",value:function(e){if(this.running=!1,this.queue&&this.queue.length){var t=this.queue.shift();t&&(this.running=!0,t.callback&&a.isFunction(t.callback)&&t.callback(e))}}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=o},function(e,t,n){var r=n(0),a=n(1),i=r.LogLevelEnum,o=r.LogMessageEnum,u=r.LogMessageUtil,l=r.getLogger(),s=["url"],c={dispatch:function(e,t){var r,c="?";for(var g in e)e.hasOwnProperty(g)&&-1===s.indexOf(g)&&(c+=g+"="+e[g]+"&");try{0,r=new URL(e.url),n(51).sendCall(r,c)}catch(t){var f=e.url;l.log(i.ERROR,u.build(o.ERROR_MESSAGES.IMPRESSION_FAILED,{file:a.EventDispatcher,endPoint:f,err:t}))}return!1}};e.exports=c},function(e,t){var n=function(){},r={sendCall:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="https://".concat(e.host).concat(e.pathname).concat(t),i=r.successCallback,o=r.errorCallback,u=!1,l=new Image;i=i||n,o=o||n,l.onload=function(){u||(u=!0,i())},l.onerror=function(){u||(u=!0,o())},l.src=a}};e.exports=r},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(53),i=n(5),o=n(7),u=n(16),l=n(0),s=n(1),c=l.LogLevelEnum,g=l.LogMessageEnum,f=l.LogMessageUtil,E=s.SettingsFileManager,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?(t.settingsFile&&!t.settingsFile.campaigns&&(t.settingsFile.campaigns=[]),this._configObj=t,this._clonedSettingsFile=t.settingsFile?o.cloneObject(t.settingsFile):null):(this._configObj=null,this._clonedSettingsFile=null)}var t,n,l;return t=e,(n=[{key:"_setVariationBucketing",value:function(e){i.setVariationAllocation(e)}},{key:"isSettingsFileValid",value:function(){return!(!this._configObj||!this._clonedSettingsFile||!a.test(this._clonedSettingsFile)&&(this._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.SETTINGS_FILE_CORRUPTED,{file:E})),1))}},{key:"checkAndPoll",value:function(){var e=this;if(this._configObj.pollingInterval&&this._configObj.sdkKey){var t=JSON.stringify(this._clonedSettingsFile);setInterval((function(){u.get(e._clonedSettingsFile.accountId,e._configObj.sdkKey).then((function(n){e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.POLLING_SUCCESS,{file:E,accountId:e._clonedSettingsFile.accountId}));var r=JSON.stringify(n);r!==t?(t=r,e.updateSettingsFile(n),e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.SETTINGS_FILE_UPDATED,{file:E,accountId:e._clonedSettingsFile.accountId}))):e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.SETTINGS_NOT_UPDATED,{file:E,accountId:e._clonedSettingsFile.accountId}))})).catch((function(t){e._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.POLLING_FAILED,{file:E,accountId:e._clonedSettingsFile.accountId}))}))}),this._configObj.pollingInterval),this._configObj.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.STARTED_POLLING,{file:E,pollingInterval:this._configObj.pollingInterval}))}}},{key:"processSettingsFile",value:function(){for(var e=this._clonedSettingsFile,t=0;t<e.campaigns.length;t++){var n=e.campaigns[t];this._setVariationBucketing(n)}return this._configObj.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.SETTINGS_FILE_PROCESSED,{file:E})),e}},{key:"getAndUpdateSettingsFile",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._clonedSettingsFile.accountId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._clonedSettingsFile.sdkKey;return new Promise((function(r,a){u.get(t,n,{isViaWebhook:!0}).then((function(t){e.updateSettingsFile(t),r(t)}))}))}},{key:"updateSettingsFile",value:function(e){this._clonedSettingsFile=o.cloneObject(e),this.processSettingsFile()}},{key:"getConfig",value:function(){return this._configObj}},{key:"getSettingsFile",value:function(e){return this._clonedSettingsFile||this._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.API_HAS_CORRUPTED_SETTINGS_FILE,{file:E,api:e})),this._clonedSettingsFile}}])&&r(t.prototype,n),l&&r(t,l),e}();e.exports=d},function(e,t,n){var r=n(54),a=r.superstruct,i=r.struct;function o(e,t){return"[object Object]"===Object.prototype.toString.call(e)?i({}).test(e):"[object Array]"===Object.prototype.toString.call(e)&&t.test(e)}var u=(i=a({types:{variationsType:function(e){return o(e,s)},goalsType:function(e){return o(e,u)},variablesType:function(e){return o(e,l)},campaignsType:function(e){return o(e,c)}}}))([{id:"number|string",identifier:"string",type:"string"}]),l=i([{id:"number|string",type:"string",key:"string",value:"number|string|boolean"}]),s=i([{id:"number|string",name:"string",weight:"number|string",changes:"object?",segments:"object?",variables:"variablesType?",isFeatureEnabled:"boolean?",startVariationAllocation:"number?",endVariationAllocation:"number?"}]),c=i([{id:"number|string",type:"string",key:"string",status:"string",percentTraffic:"number",goals:"goalsType",variations:"variationsType",variables:"variablesType?",segments:"object",isForcedVariationEnabled:"boolean?"}]),g=i({sdkKey:"string?",version:"number|string",accountId:"number|string",campaigns:"campaignsType"});e.exports=g},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&u(a,n.prototype),a}).apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}n.r(t),n.d(t,"StructError",(function(){return S})),n.d(t,"Types",(function(){return E})),n.d(t,"isStruct",(function(){return R})),n.d(t,"struct",(function(){return y})),n.d(t,"superstruct",(function(){return b}));var c=Object.prototype.toString,g=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return"GeneratorFunction"===f(e)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(f(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(t=c.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function f(e){return e.constructor?e.constructor.name:null}var E={any:function(e){return void 0!==e},arguments:function(e){return"arguments"===g(e)},array:function(e){return"array"===g(e)},boolean:function(e){return"boolean"===g(e)},buffer:function(e){return"buffer"===g(e)},date:function(e){return"date"===g(e)&&!isNaN(e)},error:function(e){return"error"===g(e)},float32array:function(e){return"float32array"===g(e)},float64array:function(e){return"float64array"===g(e)},function:function(e){return"function"===g(e)},generatorfunction:function(e){return"generatorfunction"===g(e)},int16array:function(e){return"int16array"===g(e)},int32array:function(e){return"int32array"===g(e)},int8array:function(e){return"int8array"===g(e)},map:function(e){return"map"===g(e)},null:function(e){return"null"===g(e)},number:function(e){return"number"===g(e)},object:function(e){return"object"===g(e)},promise:function(e){return"promise"===g(e)},regexp:function(e){return"regexp"===g(e)},set:function(e){return"set"===g(e)},string:function(e){return"string"===g(e)},symbol:function(e){return"symbol"===g(e)},uint16array:function(e){return"uint16array"===g(e)},uint32array:function(e){return"uint32array"===g(e)},uint8array:function(e){return"uint8array"===g(e)},uint8clampedarray:function(e){return"uint8clampedarray"===g(e)},undefined:function(e){return"undefined"===g(e)},weakmap:function(e){return"weakmap"===g(e)},weakset:function(e){return"weakset"===g(e)}},d=!0,p="Invariant failed";function v(e,t){if(!e)throw d?new Error(p):new Error(p+": "+(t||""))}var S=function(e){var t,n;function r(t){var n;v(t.length>0,"StructError requires being passed a failure, but received: "+t);var a=t[0],i=a.path,o=a.value,u=a.type,l=a.branch,s=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,["path","value","type","branch"]),c="Expected a value of type `"+u+"`"+(i.length?" for `"+i.join(".")+"`":"")+" but received `"+JSON.stringify(o)+"`.";return(n=e.call(this,c)||this).type=u,n.value=o,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),s),n.path=i,n.branch=l,n.failures=t,n.stack=(new Error).stack,n.__proto__=r.prototype,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(s(TypeError)),_=Symbol("STRUCT"),R=function(e){return"function"==typeof e&&e[_]},A=function(e){var t=e.struct.Error,n=function e(t){return e.assert(t)};return Object.defineProperty(n,_,{value:!0}),n.kind=e.kind,n.type=e.type,n.default=function(){return"function"==typeof e.defaults?e.defaults():e.defaults},n.test=function(e){return!n.check(e,[e],[])[0]},n.assert=function(e){var r=n.check(e,[e],[]),a=r[0],i=r[1];if(a)throw new t(a);return i},n.validate=function(e){var r=n.check(e,[e],[]),a=r[0],i=r[1];return a?[new t(a)]:[void 0,i]},n.check=function(e,t,r){return void 0===e&&(e=n.default()),[[n.fail({value:e,branch:t,path:r})]]},n.fail=function(e){return i({},e,{type:"type"in e?e.type:n.type})},n},I=function(e,t,n){v(Array.isArray(e)&&0!==e.length,"Union structs must be defined as a non-empty array, but you passed: "+e);var r=e.map((function(e){return n(e)})),a=r.map((function(e){return e.type})).join(" | "),i=A({kind:"union",type:a,defaults:t,struct:n});return i.check=function(e,t,n){void 0===e&&(e=i.default());var a=r,o=Array.isArray(a),u=0;for(a=o?a:a[Symbol.iterator]();;){var l;if(o){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var s=l.check(e,t,n),c=s[0],g=s[1];if(!c)return[void 0,g]}return[[i.fail({value:e,branch:t,path:n})]]},i},b=function(e){void 0===e&&(e={});var t=function e(t,n){return function(e,t,n){if(R(e))return e;if(Array.isArray(e)){if(1===e.length){var r=e[0];return n.array([r],t)}if(e.length>1)return n.tuple(e,t)}if("function"==typeof e)return n.function(e,t);if("object"==typeof e)return n.object(e,t);if("string"==typeof e){var a,i=!1;if(e.endsWith("?")&&(i=!0,e=e.slice(0,-1)),e.includes("|")){var o=e.split(/\s*\|\s*/g);a=n.union(o,t)}else if(e.includes("&")){var u=e.split(/\s*&\s*/g);a=n.intersection(u,t)}else a=n.scalar(e,t);return i&&(a=n.union([a,"undefined"],void 0)),a}throw new Error("A schema definition must be an object, array, string or function, but you passed: "+e)}(t,n,e)};return t.array=function(e,n){return function(e,t,n){v(Array.isArray(e)&&1===e.length,"Array structs must be defined as an array with one element, but you passed: "+e);var r=n(e[0],void 0),a=A({kind:"array",type:r.type+"[]",defaults:t,struct:n});return a.check=function(e,t,n){if(void 0===e&&(e=a.default()),!Array.isArray(e))return[[a.fail({value:e,branch:t,path:n})]];for(var i=[],o=[],u=0;u<e.length;u++){var l=e[u],s=r.check(l,t.concat(l),n.concat(u)),c=s[0],g=s[1];c?o.push.apply(o,c):i[u]=g}return o.length?[o]:[void 0,i]},a}(e,n,t)},t.dynamic=function(e,n){return function(e,t,n){v("function"==typeof e,"Dynamic structs must be defined as a function, but you passed: "+e);var r=A({kind:"dynamic",type:"dynamic<…>",defaults:t,struct:n});return r.check=function(t,n,a){return void 0===t&&(t=r.default()),e(t,n,a).check(t,n,a)},r}(e,n,t)},t.enum=function(e,n){return function(e,t,n){v(Array.isArray(e),"Enum structs must be defined as an array, but you passed: "+e);var r=n((function(t){return e.includes(t)}),t);return r.kind="enum",r.type=e.map((function(e){return"string"==typeof e?'"'+e+'"':""+e})).join(" | "),r}(e,n,t)},t.function=function(e,n){return function(e,t,n){var r=A({kind:"function",type:"function<…>",defaults:t,struct:n});return r.check=function(t,n,a){void 0===t&&(t=r.default());var o=e(t,n,a);if(!0===o)return[void 0,t];var u=[];if(!1===o)u.push(r.fail({value:t,branch:n,path:a}));else if(Array.isArray(o)&&o.length>0){var l=o,s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var g;if(s){if(c>=l.length)break;g=l[c++]}else{if((c=l.next()).done)break;g=c.value}var f=g;u.push(r.fail(i({value:t,branch:n,path:a},f)))}}else"object"==typeof o?u.push(r.fail(i({value:t,branch:n,path:a},o))):v(!1,"Validator functions must return a boolean, a failure object, or an array of failure objects, but you passed: "+o);return[u]},r}(e,n,t)},t.instance=function(e,n){return function(e,t,n){v("function"==typeof e,"Instance structs must be defined as a function, but you passed: "+e);var r=n((function(t){return t instanceof e}),t);return r.kind="instance",r.type="instance<"+e.name+">",r}(e,n,t)},t.interface=function(e,n){return function(e,t,n){v("object"==typeof e,"Interface structs must be defined as an object, but you passed: "+e);var r={};for(var a in e)r[a]=n(e[a]);var i=A({kind:"interface",type:"interface<{"+Object.keys(e).join()+"}>",defaults:t,struct:n});return i.check=function(e,t,n){if(void 0===e&&(e=i.default()),"object"!=typeof e&&"function"!=typeof e)return[[i.fail({value:e,branch:t,path:n})]];var a=[];for(var o in r){var u=r[o],l=e[o],s=u.check(l,t.concat(l),n.concat(o))[0];s&&a.push.apply(a,s)}return a.length?[a]:[void 0,e]},i}(e,n,t)},t.intersection=function(e,n){return function(e,t,n){v(Array.isArray(e)&&0!==e.length,"Intersection structs must be defined as a non-empty array, but you passed: "+e);var r=e.map((function(e){return n(e)})),a=r.map((function(e){return e.type})).join(" & "),i=A({kind:"intersection",type:a,defaults:t,struct:n});return i.check=function(e,t,n){void 0===e&&(e=i.default());var a=e,o=r,u=Array.isArray(o),l=0;for(o=u?o:o[Symbol.iterator]();;){var s;if(u){if(l>=o.length)break;s=o[l++]}else{if((l=o.next()).done)break;s=l.value}var c=s.check(e,t,n),g=c[0],f=c[1];if(g)return[[i.fail({value:e,branch:t,path:n})]];a=f}return[void 0,a]},i}(e,n,t)},t.lazy=function(e,n){return function(e,t,n){v("function"==typeof e,"Lazy structs must be defined as a function, but you passed: "+e);var r=A({kind:"lazy",type:"lazy<…>",defaults:t,struct:n});return r.check=function(){return Object.assign(r,e()),r.check.apply(r,arguments)},r}(e,n,t)},t.literal=function(e,n){return function(e,t,n){var r=n((function(t){return t===e}),t);return r.kind="literal",r.type="string"==typeof e?'"'+e+'"':""+e,r}(e,n,t)},t.object=function(e,n){return function(e,t,n){v("object"==typeof e,"Object structs must be defined as an object, but you passed: "+e);var r={};for(var a in e)r[a]=n(e[a]);var i=A({kind:"object",type:"{"+Object.keys(e).join()+"}",defaults:t,struct:n});return i.check=function(e,t,n){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:n})]];var o={},u=[],l=new Set(Object.keys(r).concat(Object.keys(e))),s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var f;if(s){if(c>=l.length)break;f=l[c++]}else{if((c=l.next()).done)break;f=c.value}var E=f,d=e[E],p=n.concat(E),v=t.concat(d),S=r[E];if(void 0===d&&null!=a&&E in a&&(d="function"==typeof a[E]?a[E](e,t,n):a[E]),E in r){var _=S.check(d,v,p),R=_[0],A=_[1];R?u.push.apply(u,R):void 0!==A&&E in r&&(o[E]=A)}else u.push(i.fail({type:void 0,value:d,path:p,branch:e}))}return u.length?[u]:[void 0,o]},i}(e,n,t)},t.optional=function(e,n){return I([e,"undefined"],n,t)},t.partial=function(e,n){return function(e,t,n){v("object"==typeof e,"Partial structs must be defined as an object, but you passed: "+e);var r={};for(var a in e)r[a]=n.union([e[a],"undefined"]);var i=A({kind:"object",type:"{"+Object.keys(e).join()+"}",defaults:t,struct:n});return i.check=function(e,t,n){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:n})]];var o={},u=[],l=e,s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var f;if(s){if(c>=l.length)break;f=l[c++]}else{if((c=l.next()).done)break;f=c.value}var E=f,d=e[E],p=n.concat(E),v=t.concat(d),S=r[E];if(void 0===d&&null!=a&&E in a&&(d="function"==typeof a[E]?a[E](e,t,n):a[E]),E in r){var _=S.check(d,v,p),R=_[0],A=_[1];R?u.push.apply(u,R):void 0!==A&&E in r&&(o[E]=A)}else u.push(i.fail({type:void 0,value:d,path:p,branch:e}))}return u.length?[u]:[void 0,o]},i}(e,n,t)},t.pick=function(e,n){return function(e,t,n){v("object"==typeof e,"Pick structs must be defined as an object, but you passed: "+e);var r={};for(var a in e)r[a]=n(e[a]);var i=A({kind:"pick",type:"pick<{"+Object.keys(e).join()+"}>",defaults:t,struct:n});return i.check=function(e,t,n){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:n})]];var o={},u=[];for(var l in r){var s=e[l],c=n.concat(l),f=t.concat(s),E=r[l];void 0===s&&null!=a&&l in a&&(s="function"==typeof a[l]?a[l](e,t,n):a[l]);var d=E.check(s,f,c),p=d[0],v=d[1];p?u.push.apply(u,p):void 0!==v&&l in r&&(o[l]=v)}return u.length?[u]:[void 0,o]},i}(e,n,t)},t.record=function(e,n){return function(e,t,n){v(Array.isArray(e)&&2===e.length,"Record structs must be defined as an array with two elements, but you passed: "+e);var r=n(e[0]),a=n(e[1]),o=A({kind:"record",type:"record<"+r.type+","+a.type+">",defaults:t,struct:n});return o.check=function(e,t,n){var u=o.default();if(e=u?i({},u,{},e):e,"object"!==g(e))return[[o.fail({value:e,branch:t,path:n})]];var l={},s=[];for(var c in e){var f=e[c],E=n.concat(c),d=t.concat(f),p=r.check(c,d,E),v=p[0],S=p[1];if(v)s.push.apply(s,v);else{var _=a.check(f,d,E),R=_[0],A=_[1];R?s.push.apply(s,R):l[S]=A}}return s.length?[s]:[void 0,l]},o}(e,n,t)},t.scalar=function(e,n){return function(e,t,n){v("string"==typeof e,"Scalar structs must be defined as a string, but you passed: "+e);var r=n.Types;v(e in r,'No struct validator function found for type "'+e+'".');var a=n(r[e],t);return a.kind="scalar",a.type=e,a}(e,n,t)},t.size=function(e,n){return function(e,t,n){v(Array.isArray(e)&&2===e.length&&e.every((function(e){return"number"==typeof e})),"Size structs must be defined as an array with two number elements, but you passed: "+e);var r=e[0],a=e[1],i=n((function(e){return null!=e&&"number"==typeof e.length&&e.length>=r&&e.length<=a}),t);return i.kind="size",i.type="size<"+r+","+a+">",i}(e,n,t)},t.tuple=function(e,n){return function(e,t,n){v(Array.isArray(e),"Tuple structs must be defined as an array, but you passed: "+e);var r=e.map((function(e){return n(e)})),a=A({kind:"tuple",type:"["+r.map((function(e){return e.type})).join()+"]",defaults:t,struct:n});return a.check=function(e,t,n){if(void 0===e&&(e=a.default()),!Array.isArray(e))return[[a.fail({value:e,branch:t,path:n})]];for(var i=[],o=[],u=Math.max(e.length,r.length),l=0;l<u;l++){var s=r[l],c=e[l],g=n.concat(l),f=t.concat(c);if(s){var E=s.check(c,f,g),d=E[0],p=E[1];d?o.push.apply(o,d):i[l]=p}else o.push(a.fail({type:void 0,value:c,path:g,branch:f}))}return o.length?[o]:[void 0,i]},a}(e,n,t)},t.union=function(e,n){return I(e,n,t)},t.Error=e.error||S,t.Types=i({},E,{},e.types),t},y=b()},function(e,t){var n={send:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.method,n=e.url;if(n&&t)return new Promise((function(e,r){var a=new XMLHttpRequest;a.open(t,n),a.send(),a.onload=function(){try{e(JSON.parse(a.response))}catch(e){console.error(e)}},a.onerror=function(){var e="Request failed for fetching account settings. Got Status Code: ".concat(a.status);console.error(e),r(e)}}))}};e.exports=n}])}));
//# sourceMappingURL=vwo-javascript-sdk.min.js.map